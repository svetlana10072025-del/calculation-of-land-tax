# .github/workflows/warmup-proper.yml
name: üî• –ù–∞—Å—Ç–æ—è—â–∏–π –ø—Ä–æ–≥—Ä–µ–≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤

on:
  schedule:
    # –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
    - cron: '*/30 * * * *'
  workflow_dispatch:

jobs:
  warmup:
    runs-on: ubuntu-latest
    steps:
    - name: üî• –ù–∞—Å—Ç–æ—è—â–∏–π –ø—Ä–æ–≥—Ä–µ–≤ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      run: |
        echo "=== –ù–ê–ß–ò–ù–ê–ï–ú –ù–ê–°–¢–û–Ø–©–ò–ô –ü–†–û–ì–†–ï–í ==="
        echo "–í—Ä–µ–º—è: $(date)"
        echo ""
        
        # –í–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ URL (—É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ!)
        CALCULATORS=(
          "https://calculation-of-land-tax-4sx2mxfrtshecl77uvz7l6.streamlit.app/"
          "https://calculation-eco-tax-xfu9rozazao4heudm3p6gz.streamlit.app/"
          "https://calculation-of-excise-bnrlk8d8pnf4wpwhwvnpfj.streamlit.app/"
          "https://calculation-of-mining-tax-jvospomyc4pgvpy8ubrrrw.streamlit.app/"
          "https://calculation-of-oil-tax-fsdt98ampwhs5pzpfzuhsy.streamlit.app/"
          "https://calculation-of-tax-bfapeep5eknsp2xxs5kfij.streamlit.app/"
        )
        
        for url in "${CALCULATORS[@]}"; do
          echo "üîÑ –ü—Ä–æ–≥—Ä–µ–≤–∞–µ–º: $(basename $url .streamlit.app)"
          
          # –ö–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ: -L –¥–ª—è —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∑–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞–º–∏
          # –∏ -v –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è
          response=$(curl -s -L \
            -o /dev/null \
            -w "–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å: %{http_code}, –í—Ä–µ–º—è: %{time_total}—Å, –¶–µ–ø–æ—á–∫–∞: %{num_redirects} —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n" \
            -m 60 \
            --compressed \
            "$url?_github_warmup=$(date +%s)")
          
          echo "$response"
          
          # –ü–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
          echo "–ü–∞—É–∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã..."
          sleep 3
          echo ""
        done
        
        echo "‚úÖ –ù–∞—Å—Ç–æ—è—â–∏–π –ø—Ä–æ–≥—Ä–µ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω!"
